<% if @task.errors.any? %>
	$('#create_task_errors').html( "<%= escape_javascript(render 'global/error_messages', :target => @task) %>" );
	<%= render 'global/ajax_form_errors', :target => @task, :form_id => "create_task_form" %>
<% else %>
	// Section Specific Code
	<% due_section = find_due_section(@task) %>
	$('#<%=due_section %>_tasks_section').removeClass("no_task");
	$('#<%=due_section %>_tasks_section').fadeIn(1000);
	$('#<%=due_section %>_tasks').prepend("<%= escape_javascript(render @task) %>"); //probably append instead of prepend
	$("#<%=due_section %>_tasks .task").first().effect("highlight", {}, 1500);
	// Clear up final functions
	$('#create_task_form').get(0).reset();
	$('.due_date_field').parent().hide(); // Hide LI tag
	$('#task_due_date').val( Date.today().toString('yyyy-MM-dd') );
	$('#create_task_errors').html("");
<% end %>
<% flash.discard %>