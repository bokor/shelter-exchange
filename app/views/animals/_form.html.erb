<%= form_for (@animal), :html => { :multipart => :true } do |f| %>
	<ul class="form">
		<li style="float:right; width:40%">
			<%= image_tag @animal.photo.url(:small) %><br />
			<%= f.label :photo, "Upload image" %><br />
			<%= f.file_field :photo  %>
		</li>
		
		<li>
			<%= f.label :name, "Animal name" %><br />
			<%= f.text_field :name %>
		</li>
		<li>
			<%= f.label :animal_type_id, "Animal type" %><br />
			<%= collection_select(:animal, :animal_type_id, AnimalType.all, :id, :name, :prompt => "Select Type") %>
		</li>
		<li> 
			<div id="primary_breed_field">
				<%= f.label :primary_breed, "Primary breed" %><br />
				<%= f.text_field :primary_breed, :autocomplete => :off %>
				
				<p style="padding: 5px 0px 0px 10px"><%= f.check_box :is_mix_breed %>&nbsp;&nbsp;<%= f.label "Mixed Breed?" %></p>
			</div>
			<div id="secondary_breed_field">
				<%= f.label :secondary_breed, "Secondary breed" %><br />
				<%= f.text_field :secondary_breed, :autocomplete => :off %>
			</div>
		</li>
		<li>
			<%= f.label :animal_status_id, "Animal status" %><br />
			<%= collection_select(:animal, :animal_status_id, AnimalStatus.all, :id, :name, :prompt => "Select Status") %>
		</li>
		<li>
			<%= f.label :sex, "Sex" %><br />
			<% Animal::SEX.each do |value| %>
				<%= f.radio_button "sex", value %>
				<%= f.label "sex_#{value.downcase}", "#{value}" %>
			<% end %>
		</li>
		<li>
			<%= f.check_box :is_sterilized %>&nbsp;&nbsp;<%= f.label :is_sterilized, "Sterilization" %>
		</li>
		<li>
			<%= f.label :age, "Age" %><br />
			<%= f.text_field :age %>
		</li>
		<li>
			<%= f.label :weight, "Weight" %><br />
			<%= f.text_field :weight %>
		</li>
		<li>
			<%= f.label :color, "Color" %><br />
			<%= f.text_field :color %>
		</li>
		<li>
			<%= f.label :chip_id , "Microchip#" %><br />
			<%= f.text_field :chip_id %>
		</li>
		<li>
			<%= f.label :description, "Description" %><br />
			<%= f.text_area :description %>
		</li>
		<li>
			<% if @current_shelter.is_kill_shelter %>
			
			<script>			
			$(function() {
				$("#arrival_date_datepicker").datepicker({
					showOn: "button",
					buttonImage: "/images/rails.png",
					buttonImageOnly: true,
					numberOfMonths: 1,
					showButtonPanel: false,
					dateFormat: 'yy-mm-dd',
					altField: "#arrival_date_humanize",
					altFormat: "D MM d, yy",
					onSelect: function(dateText,picker) { 
						//HIDDEN FIELD
						$('#animal_arrival_date').val( dateText ); 

						//DIV FIELD
						var dateFormat = $(this).datepicker( "option", "dateFormat" );
						var altFormat = $(this).datepicker( "option", "altFormat" );
						var altField = $(this).datepicker( "option", "altField" );
						var parseDate = $.datepicker.parseDate(dateFormat, dateText);
						var formatDate = $.datepicker.formatDate(altFormat, parseDate);
						$(altField).html(formatDate);

					}  
				});
			});
			
			$(function() {
				$("#euthanasia_scheduled_datepicker").datepicker({
					showOn: "button",
					buttonImage: "/images/rails.png",
					buttonImageOnly: true,
					numberOfMonths: 1,
					showButtonPanel: false,
					dateFormat: 'yy-mm-dd',
					altField: "#euthanasia_scheduled_humanize",
					altFormat: "D MM d, yy",
					onSelect: function(dateText,picker) { 
						//HIDDEN FIELD
						$('#animal_euthanasia_scheduled').val( dateText ); 

						//DIV FIELD
						var dateFormat = $(this).datepicker( "option", "dateFormat" );
						var altFormat = $(this).datepicker( "option", "altFormat" );
						var altField = $(this).datepicker( "option", "altField" );
						var parseDate = $.datepicker.parseDate(dateFormat, dateText);
						var formatDate = $.datepicker.formatDate(altFormat, parseDate);
						$(altField).html(formatDate);

					}  
				});
			});
			
			$(function() {
			
			var animal_arrival_date = $('#animal_arrival_date').val();
			var animal_euthanasia_scheduled = $('#animal_euthanasia_scheduled').val();

			$('#arrival_date_datepicker').datepicker("setDate", animal_arrival_date);
			$('#euthanasia_scheduled_datepicker').datepicker("setDate", animal_euthanasia_scheduled);
			
			var animal_arrival_temp_date = $('#arrival_date_datepicker').datepicker("getDate");
			var euthanasia_scheduled_temp_date = $('#euthanasia_scheduled_datepicker').datepicker("getDate");
			
			var animal_arrival_set_date = new Date(animal_arrival_temp_date).toString('ddd MMMM dd, yyyy'); //DateJS formatting
			var euthanasia_scheduled_set_date = new Date(euthanasia_scheduled_temp_date).toString('ddd MMMM dd, yyyy'); //DateJS formatting
			
			$('#arrival_date_humanize').html(animal_arrival_set_date);
			$('#euthanasia_scheduled_humanize').html(euthanasia_scheduled_set_date);
			});
			
			$(function() {
			    $('#arrival_date_trigger').click(function() {
			        $('#arrival_date_datepicker').slideToggle();
			    });
				$('#euthanasia_scheduled_trigger').click(function() {
			        $('#euthanasia_scheduled_datepicker').slideToggle();
			    });
			});

			</script>
			
			<div id="euthanasia_info">
				<fieldset>
			    	<legend>Euthanasia info:</legend>
					<%= f.label :arrival_date, "Date of arrival" %><br />
					<div id="arrival_date_field">
						<div id="arrival_date_humanize">Select Date</div>
						<img src="/images/rails.png" width="20" height="30" id="arrival_date_trigger" />
					</div>
					<div id="arrival_date_datepicker"></div>
					<%= f.hidden_field :arrival_date %>
					
					<%= f.label :euthanasia_scheduled, "Euthanasia scheduled" %><br />
					<div id="euthanasia_scheduled_field">
						<div id="euthanasia_scheduled_humanize">Select Date</div>
						<img src="/images/rails.png" width="20" height="30" id="euthanasia_scheduled_trigger" />
					</div>
					<div id="euthanasia_scheduled_datepicker"></div>
					<%= f.hidden_field :euthanasia_scheduled %>
					
					<%= f.label :hold_time, "Hold time" %><br />
					<%= f.text_field :hold_time %> days 
				</fieldset>
			</div>
			<% end %>
		</li>
	</ul>
	<div class="clear"></div>
	<div class="actions">
		<%= f.submit button_text, :disable_with => "Submitting...", :class => 'button' %>
	</div>
	<div class="clear"></div>
<% end %>