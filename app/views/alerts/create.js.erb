<% if @alert.errors.any? %>
	$('#create_alert_errors').html( "<%= escape_javascript(render 'global/error_messages', :target => @alert) %>" );
	<% @alert.errors.each do |field, msg| %>
		var element = $("#alert_<%= field %>").parents("li");
		if ( !element.hasClass("error") ) {
			element.addClass("error");
			element.append("<%= escape_javascript(create_error_message(msg)) %>");
		}
	<% end %>
<% else %>
	<% if @alert.alertable_type == "Animal" %>
		$('#alerts').prepend("<%= escape_javascript(render 'alert', :alert => @alert) %>"); 
		$(".alert").first().effect("highlight", {}, 1500);
	<% else %>
		$('#shelter_alerts_section').removeClass("no_alert");
		$('#shelter_alerts_section').fadeIn(1000);
		$('#shelter_alerts').prepend("<%= escape_javascript(render @alert) %>"); 
		$("#shelter_alerts .alert").first().effect("highlight", {}, 1500);
	<% end %>
	$('#new_alert').get(0).reset();
	$('#alert_errors').html("");
<% end %>
<% flash.discard %>
