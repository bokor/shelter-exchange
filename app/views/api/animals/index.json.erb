<% json = @animals.collect do |animal|
{ 
	:animal => { 
		:id => animal.id,
    	:name => animal.name,
    	:type => animal.animal_type.name,
		:status => animal.animal_status.name,
		:mixed_breed => animal.mix_breed?,
		:primary_breed => animal.primary_breed,
		:secondary_breed => animal.secondary_breed,
		:full_breed_in_text => animal.full_breed,
		:sterilized => animal.sterilized? ? true : false,
		:date_of_birth => animal.date_of_birth,
   		:date_of_birth_text => humanize_dob(animal.date_of_birth),
		:size => animal.size,
		:color => animal.color,
		:microchip => animal.microchip,
		:has_special_needs => animal.special_needs?,
		:special_needs => animal.special_needs,
    	:description => auto_link(animal.description, :all, :target => "_blank"),
   		:weight => animal.weight,
    	:sex => animal.sex.to_s.humanize,
    	:euthanasia_info => {
				:arrival_date => format_date(:default, animal.arrival_date),
				:hold_time => animal.hold_time.blank? ? "" : "#{animal.hold_time} days",
				:euthanasia_date => format_date(:default, animal.euthanasia_date)
		},
    	:photo => {
    		:thumbnail => animal.photo.file? ? animal.photo.url(:thumb) : "",
    		:small => animal.photo.file? ? animal.photo.url(:small) : "",
     		:large => animal.photo.file? ? animal.photo.url(:large) : ""
   		},
		:video => animal.video_url || "",
		:url => public_save_a_life_url(animal, :subdomain => "www")
	}
}
end %>
<% if params[:callback] %>
<%= (params[:callback] << "(" << json.to_json << ")").html_safe %>
<% else %>
<%= json.to_json.html_safe %>
<% end %>

