<% if @accommodation.errors.any? %>
	$('#update_accommodation_errors_<%= @accommodation.id %>').html( "<%= escape_javascript(render 'global/error_messages', :target => @accommodation) %>" );
	<% @accommodation.errors.each do |field, msg| %>
		var element = $("#accommodation_<%= field %>").parents("li");
		if ( !element.hasClass("error") ) {
			element.addClass("error");
			element.append("<%= escape_javascript(create_error_message(msg)) %>");
		}
	<% end %>
<% else %>
	//Update Location
	$('#edit_accommodation_<%=@accommodation.id%>').slideToggle(800, function() { 
		$('#accommodation_<%=@accommodation.id%>').replaceWith( "<%= escape_javascript(render @accommodation) %>" );
		$('#accommodation_<%=@accommodation.id%>').fadeIn(1000).effect("highlight", {}, 1000);
		$(this).remove(); 
	});
	
	$('#accommodation_errors').html("");
<% end %>
<% flash.discard %>